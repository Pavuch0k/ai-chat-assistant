# AI Chat Assistant

AI чат-ассистент с RAG и интеграцией CRM.

## Структура проекта

```
ai-chat/
├── backend/          # FastAPI приложение
│   └── app/
│       ├── api/      # API endpoints
│       ├── core/     # Конфигурация
│       ├── models/   # Модели данных
│       ├── services/ # Бизнес-логика
│       ├── db/       # Работа с БД
│       ├── ai/       # AI сервисы
│       └── utils/    # Утилиты
├── frontend/         # Виджет для сайта
├── docker/           # Docker файлы
└── docker-compose.yml
```

## Запуск

### Вариант 1: Локально без Docker (рекомендуется)

Автоматическая установка и запуск:
```bash
./scripts/run/setup_and_run.sh
```

Скрипт автоматически:
- Проверит и установит все зависимости (Python, PostgreSQL, Qdrant)
- Создаст виртуальное окружение
- Установит все Python пакеты
- Настроит базу данных
- Запустит все сервисы

**Важно:** После первого запуска отредактируйте `.env` файл и укажите:
- `OPENAI_API_KEY` - ваш API ключ OpenAI
- `OPENAI_PROXY_URL`, `OPENAI_PROXY_USERNAME`, `OPENAI_PROXY_PASSWORD` - данные прокси (опционально)
- `BITRIX24_WEBHOOK_URL` - URL вебхука Bitrix24 для создания лидов (опционально)

Запуск frontend отдельно (в другом терминале):
```bash
./scripts/run/run_frontend.sh
```

### Вариант 2: Через Docker

```bash
docker-compose up -d
```

## Доступ к сервисам

- **Frontend (Виджет)**: http://localhost:8080
- **Backend API**: http://localhost:8000
- **Админ панель**: http://localhost:8000/admin
- **API Документация**: http://localhost:8000/docs

## Админ панель

Админ панель доступна по адресу: **http://localhost:8000/admin**

В админ панели можно:
- Просматривать все контакты клиентов
- Просматривать историю переписок
- Видеть все сообщения и ответы бота

## Функционал

- ✅ AI бот поддержки на базе GPT-4o-mini
- ✅ RAG (Retrieval-Augmented Generation) с базой знаний на Qdrant
- ✅ Сохранение полного контекста разговора (до 50 сообщений)
- ✅ Автоматическое извлечение и сохранение контактов из сообщений
- ✅ Естественный сбор контактных данных в процессе диалога
- ✅ Интеграция с Bitrix24 для автоматического создания лидов
- ✅ Админ панель для просмотра контактов и истории
- ✅ Загрузка документов в базу знаний (PDF, DOCX)
- ✅ Swagger документация API

## Документация

Подробная документация доступна в файле [DOCS.md](DOCS.md)

### Быстрые ссылки

- **API Документация (Swagger)**: http://localhost:8000/docs
- **Админ панель**: http://localhost:8000/admin
- **Виджет**: http://localhost:8080
